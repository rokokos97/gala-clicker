(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))n(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const f of r.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&n(f)}).observe(document,{childList:!0,subtree:!0});function a(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function n(o){if(o.ep)return;o.ep=!0;const r=a(o);fetch(o.href,r)}})();const z="/gala-clicker/galaStudent.webp",B="/gala-clicker/galaTrainee.webp",V="/gala-clicker/galaJunior.webp",W="/gala-clicker/galaMiddle.webp",K="/gala-clicker/galaSenior.webp",Q="/gala-clicker/galaTeamLead.webp",Z="/gala-clicker/galaGoogle.webp",q="http://localhost:8080/api/users/";async function D(i){try{const l=await fetch(`${q}${i.id}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(l){return console.error("Error updating user:",l),{error:"Error updating user data"}}}async function ee(i){try{const l=await fetch(`${q}${i}`);if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);return await l.json()}catch(l){return console.error("Error fetching user:",l),{error:"Error fetching user data"}}}function A(i){console.log("Initializing app with user:",i);const l=document.querySelectorAll("nav ul li a"),a=document.querySelectorAll(".section");l.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault();const s=t.target.getAttribute("data-section");a.forEach(c=>{c.id===s?c.classList.add("active"):c.classList.remove("active")})})}),document.querySelectorAll("img").forEach(e=>{e.addEventListener("contextmenu",t=>t.preventDefault()),e.setAttribute("draggable","false")});const o=document.querySelector("#circle"),r=document.querySelector("#score"),f=document.querySelector("#daily-score"),N=document.querySelector("#monthly-score"),P=document.querySelector("#total-score"),R=document.querySelector("#progress-fill"),X=document.querySelector("#clicks-left"),Y=document.querySelector("#available-lines");let u=localStorage.getItem("availableLines")?Number(localStorage.getItem("availableLines")):100,p=null,I=null;const S=[{id:1,name:"Student",numberOfCodeLines:0,imgUrl:z,xlevel:1,maxLines:100},{id:2,name:"Trainee",numberOfCodeLines:1e4,imgUrl:B,xlevel:1,maxLines:100},{id:3,name:"Junior",numberOfCodeLines:1e5,imgUrl:V,xlevel:5,maxLines:200},{id:4,name:"Middle",numberOfCodeLines:1e6,imgUrl:W,xlevel:10,maxLines:400},{id:5,name:"Senior",numberOfCodeLines:1e7,imgUrl:K,xlevel:15,maxLines:600},{id:6,name:"Team Lead",numberOfCodeLines:1e8,imgUrl:Q,xlevel:25,maxLines:800},{id:7,name:"Google",numberOfCodeLines:1e9,imgUrl:Z,xlevel:50,maxLines:999}];function G(e){J(),j(),b(m()),x($()),w(T()),C(O()),_(),k(),E(),v(),u<d(m()).maxLines&&(p=setInterval(M,1e3)),H(i)}function b(e){localStorage.setItem("score",e),r.textContent=e}function x(e){localStorage.setItem("dailyScore",e),f.textContent=e}function w(e){localStorage.setItem("monthlyScore",e),N.textContent=e}function C(e){localStorage.setItem("totalScore",e),P.textContent=e}function m(){return Number(localStorage&&localStorage.getItem("score"))||0}function $(){return Number(localStorage.getItem("dailyScore"))||0}function T(){return Number(localStorage.getItem("monthlyScore"))||0}function O(){return Number(localStorage.getItem("totalScore"))||0}function J(){const e=localStorage.getItem("lastUpdated"),t=new Date().toISOString().split("T")[0];e!==t&&(localStorage.setItem("dailyScore",0),localStorage.setItem("lastUpdated",t))}function j(){const e=localStorage.getItem("lastUpdatedMonthly"),t=new Date().toISOString().slice(0,7);e!==t&&(localStorage.setItem("monthlyScore",0),localStorage.setItem("lastUpdatedMonthly",t))}function F(){if(u>0){const e=m(),t=d(e),s=m()+t.xlevel,c=$()+t.xlevel,y=T()+t.xlevel,L=O()+t.xlevel;u-=1,localStorage.setItem("availableLines",u),b(s),x(c),w(y),C(L),_(),k(),E(),v();const h={id:localStorage.getItem("userId"),first_name:localStorage.getItem("first_name"),last_name:localStorage.getItem("last_name"),username:localStorage.getItem("username"),totalClicks:L,level:t.id,availableLines:u};D(h),clearTimeout(I),clearInterval(p),I=setTimeout(()=>{p=setInterval(M,1e3)},5e3)}else{o.classList.add("grayscale");return}}function _(){const e=m(),t=U(e),s=d(e),c=(e-s.numberOfCodeLines)/(t.numberOfCodeLines-s.numberOfCodeLines)*100;R.style.width=`${c}%`}function E(){const e=m(),t=U(e),s=d(e),c=Math.ceil((t.numberOfCodeLines-e)/s.xlevel);X.textContent=`Lines left level ${t.name}: ${c}`}function k(){const e=m(),t=d(e);o.setAttribute("src",`${t.imgUrl}`)}function v(){const e=m(),t=d(e);Y.textContent=`${u} / ${t.maxLines}`}function M(){const e=m(),t=d(e);u<t.maxLines?(u+=1,localStorage.setItem("availableLines",u),v(),u>0&&o.classList.remove("grayscale")):clearInterval(p)}function d(e){return S.slice().reverse().find(t=>e>=t.numberOfCodeLines)||S[0]}function U(e){return S.find(t=>e<t.numberOfCodeLines)||S[S.length-1]}function H(e){const t=document.querySelector(".user__info"),s=m(),c=d(s);t.innerHTML=`
            <p>Total Clicks: ${s}</p>
            <p>Current Level: ${c.name}</p>
            <p>First Name: ${e.first_name}</p>
            <p>Last Name: ${e.last_name}</p>
        `}o.addEventListener("click",e=>{const t=o.getBoundingClientRect(),s=e.clientX-t.left-t.width/2,c=e.clientY-t.top-t.height/2,y=40,L=c/t.height*y,h=s/t.width*-y;o.style.setProperty("--tiltX",`${L}deg`),o.style.setProperty("--tiltY",`${h}deg`),setTimeout(()=>{o.style.setProperty("--tiltX","0deg"),o.style.setProperty("--tiltY","0deg")},200);const g=document.createElement("div");g.classList.add("plusone"),g.textContent=`+${d(m()).xlevel}`,g.style.left=`${e.clientX-t.left}px`,g.style.top=`${e.clientY-t.top}px`,o.parentElement.appendChild(g),F(),setTimeout(()=>{g.remove()},2e3)}),G()}if(window.Telegram&&window.Telegram.WebApp){const i=window.Telegram.WebApp,l=i.initDataUnsafe.user;l&&ee(l.id).then(a=>{if(a)localStorage.setItem("score",a.totalScore),localStorage.setItem("dailyScore",a.dailyScore),localStorage.setItem("monthlyScore",a.monthlyScore),localStorage.setItem("level",a.level),localStorage.setItem("first_name",a.first_name),localStorage.setItem("last_name",a.last_name),localStorage.setItem("availableLines",a.availableLines),localStorage.setItem("username",a.username);else{const n={id:l.id,first_name:l.first_name,last_name:l.last_name,username:l.username,totalScore:0,dailyScore:0,monthlyScore:0,lastUpdated:"",lastUpdatedMonthly:"",level:1,availableLines:100};D(n),localStorage.setItem("score",n.totalScore),localStorage.setItem("dailyScore",n.dailyScore),localStorage.setItem("monthlyScore",n.monthlyScore),localStorage.setItem("level",n.level),localStorage.setItem("first_name",n.first_name),localStorage.setItem("last_name",n.last_name),localStorage.setItem("availableLines",n.availableLines),localStorage.setItem("username",n.username),localStorage.setItem("userId",n.id)}A(l)}),i.expand(),i.ready()}else A({id:0,first_name:"Guest",last_name:"",username:"",totalClicks:0,level:1,availableLines:100});
